{% extends "base.html" %}
{% block title %}Blog — NGO{% endblock %}

{% block content %}

<!-- HERO SECTION -->
<section class="w-full bg-gradient-to-r from-[#003049] to-[#176ca9] py-20 text-white text-center">
  <h1 class="text-5xl font-extrabold drop-shadow-lg">Our Blog</h1>
  <p class="text-lg mt-3 max-w-2xl mx-auto text-gray-200">
    Stories from the ground — impact, learning, and hope.
  </p>
</section>

<!-- FEATURED POST -->
{% if posts %}
{% with posts.0 as featured %}
<section class="max-w-6xl mx-auto px-6 py-16">
  <div class="grid md:grid-cols-2 gap-12 items-center">
    
    <!-- Featured Image -->
    <div class="rounded-2xl overflow-hidden shadow-lg">
      {% if featured.image %}
        <img src="{{ featured.image.url }}" 
             class="w-full h-80 object-cover" 
             alt="{{ featured.title }}">
      {% else %}
        <img src="/static/images/blog_placeholder.jpg" 
             class="w-full h-80 object-cover" 
             alt="Blog">
      {% endif %}
    </div>

    <!-- Featured Content -->
    <div>
      <p class="text-sm text-gray-500">{{ featured.published_at|date:"M d, Y" }}</p>
      <h2 class="text-3xl font-bold mt-2">{{ featured.title }}</h2>
      <p class="mt-4 text-gray-700">
        {{ featured.body|truncatechars:220 }}
      </p>

      <a href="{{ featured.get_absolute_url }}"
         class="inline-block mt-6 px-6 py-3 bg-[#d62828] text-white font-semibold rounded-xl shadow
                hover:bg-[#b42020] transition">
        Read More
      </a>
    </div>

  </div>
</section>
{% endwith %}
{% endif %}

<!-- BLOG GRID -->
<section class="bg-[#f7f4ee] py-16">
  <div class="max-w-6xl mx-auto px-6">
    <h2 class="text-3xl font-bold mb-10">Latest Posts</h2>

    <div class="grid md:grid-cols-3 gap-10">

      {% for post in posts %}
      {% if not forloop.first %} <!-- Skip featured post -->
      <article class="bg-white rounded-2xl shadow hover:shadow-lg transition overflow-hidden">

        <!-- Card Image -->
        <div class="h-48 w-full overflow-hidden">
          {% if post.image %}
            <img src="{{ post.image.url }}" class="w-full h-full object-cover" alt="{{ post.title }}">
          {% else %}
            <img src="/static/images/blog_placeholder.jpg" class="w-full h-full object-cover" alt="Blog">
          {% endif %}
        </div>

        <div class="p-6">
          <p class="text-sm text-gray-500">{{ post.published_at|date:"M d, Y" }}</p>

          <h3 class="text-xl font-semibold mt-2">
            <a href="{{ post.get_absolute_url }}" class="hover:text-[#003049] transition">
              {{ post.title }}
            </a>
          </h3>

          <p class="mt-3 text-gray-700">
            {{ post.body|truncatechars:130 }}
          </p>

          <a href="{{ post.get_absolute_url }}"
             class="mt-4 inline-block text-[#d62828] font-semibold hover:underline">
            Read More →
          </a>
        </div>

      </article>
      {% endif %}
      {% empty %}
        <p>No blog posts yet.</p>
      {% endfor %}
    </div>

  </div>
</section>

{% endblock %}
