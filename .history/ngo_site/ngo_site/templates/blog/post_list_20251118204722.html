{% extends "base.html" %}
{% block title %}Blog — NGO{% endblock %}

{% block content %}

<style>
  .text-3d {
    text-shadow: 
      1px 1px 0 rgba(0,0,0,0.1),
      2px 2px 0 rgba(0,0,0,0.1),
      3px 3px 0 rgba(0,0,0,0.1),
      4px 4px 0 rgba(0,0,0,0.1),
      5px 5px 0 rgba(0,0,0,0.1),
      6px 6px 10px rgba(0,0,0,0.3);
  }

  .arrow-container {
    position: relative;
    width: 80px;
    height: 40px;
    overflow: hidden;
  }

  .shooting-arrow {
    position: absolute;
    animation: shoot 3s ease-in infinite;
  }

  .particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: #d62828;
    border-radius: 50%;
    opacity: 0;
  }

  @keyframes shoot {
    0% {
      transform: translateX(-100px);
      opacity: 1;
    }
    33% {
      transform: translateX(50px);
      opacity: 1;
    }
    33.1% {
      opacity: 0;
    }
    100% {
      transform: translateX(-100px);
      opacity: 0;
    }
  }

  .particle-1 {
    animation: explode1 3s ease-out infinite;
  }

  .particle-2 {
    animation: explode2 3s ease-out infinite;
  }

  .particle-3 {
    animation: explode3 3s ease-out infinite;
  }

  .particle-4 {
    animation: explode4 3s ease-out infinite;
  }

  .particle-5 {
    animation: explode5 3s ease-out infinite;
  }

  .particle-6 {
    animation: explode6 3s ease-out infinite;
  }

  @keyframes explode1 {
    0%, 33% { transform: translate(50px, 20px); opacity: 0; }
    33.1% { transform: translate(50px, 20px); opacity: 1; }
    53% { transform: translate(70px, 5px); opacity: 0; }
    100% { transform: translate(50px, 20px); opacity: 0; }
  }

  @keyframes explode2 {
    0%, 33% { transform: translate(50px, 20px); opacity: 0; }
    33.1% { transform: translate(50px, 20px); opacity: 1; }
    53% { transform: translate(75px, 15px); opacity: 0; }
    100% { transform: translate(50px, 20px); opacity: 0; }
  }

  @keyframes explode3 {
    0%, 33% { transform: translate(50px, 20px); opacity: 0; }
    33.1% { transform: translate(50px, 20px); opacity: 1; }
    53% { transform: translate(70px, 30px); opacity: 0; }
    100% { transform: translate(50px, 20px); opacity: 0; }
  }

  @keyframes explode4 {
    0%, 33% { transform: translate(50px, 20px); opacity: 0; }
    33.1% { transform: translate(50px, 20px); opacity: 1; }
    53% { transform: translate(80px, 10px); opacity: 0; }
    100% { transform: translate(50px, 20px); opacity: 0; }
  }

  @keyframes explode5 {
    0%, 33% { transform: translate(50px, 20px); opacity: 0; }
    33.1% { transform: translate(50px, 20px); opacity: 1; }
    53% { transform: translate(65px, 25px); opacity: 0; }
    100% { transform: translate(50px, 20px); opacity: 0; }
  }

  @keyframes explode6 {
    0%, 33% { transform: translate(50px, 20px); opacity: 0; }
    33.1% { transform: translate(50px, 20px); opacity: 1; }
    53% { transform: translate(75px, 35px); opacity: 0; }
    100% { transform: translate(50px, 20px); opacity: 0; }
  }
</style>

<!-- HERO SECTION -->
<section class="w-full bg-gradient-to-r from-[#003049] to-[#176ca9] py-20 text-white text-center">
  <h1 class="text-5xl font-extrabold text-3d">Our Blog</h1>
  <p class="text-lg mt-3 max-w-2xl mx-auto text-gray-200">
    Stories from the ground — impact, learning, and hope.
  </p>
</section>

<!-- FEATURED POST -->
{% if posts %}
{% with posts.0 as featured %}
<section class="max-w-6xl mx-auto px-6 py-16">
  <div class="grid md:grid-cols-2 gap-12 items-center">
    
    <!-- Featured Image -->
    <div class="rounded-2xl overflow-hidden shadow-lg">
      {% if featured.image %}
        <img src="{{ featured.image.url }}" 
             class="w-full h-80 object-cover" 
             alt="{{ featured.title }}">
      {% else %}
        <img src="/static/images/blog_placeholder.jpg" 
             class="w-full h-80 object-cover" 
             alt="Blog">
      {% endif %}
    </div>

    <!-- Featured Content -->
    <div>
      <p class="text-sm text-gray-500">{{ featured.published_at|date:"M d, Y" }}</p>
      <h2 class="text-3xl font-bold mt-2">{{ featured.title }}</h2>
      <p class="mt-4 text-gray-700">
        {{ featured.body|truncatechars:220 }}
      </p>

      <a href="{{ featured.get_absolute_url }}"
         class="inline-block mt-6 px-6 py-3 bg-[#d62828] text-white font-semibold rounded-xl shadow
                hover:bg-[#b42020] hover:shadow-[0_0_20px_rgba(214,40,40,0.6)] transition">
        Read More
      </a>
    </div>

  </div>
</section>
{% endwith %}
{% endif %}

<!-- BLOG GRID -->
<section class="bg-[#f7f4ee] py-16">
  <div class="max-w-6xl mx-auto px-6">
    <div class="flex items-center gap-3 mb-12">
      <h2 class="text-4xl font-extrabold text-gray-900">Latest Posts</h2>
      <div class="arrow-container">
        <svg class="shooting-arrow w-16 h-8 text-[#d62828]" fill="none" stroke="currentColor" viewBox="0 0 48 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M2 12h38m0 0l-8-8m8 8l-8 8"></path>
        </svg>
        <div class="particle particle-1"></div>
        <div class="particle particle-2"></div>
        <div class="particle particle-3"></div>
        <div class="particle particle-4"></div>
        <div class="particle particle-5"></div>
        <div class="particle particle-6"></div>
      </div>
    </div>

    <div class="grid md:grid-cols-3 gap-10">

      {% for post in posts %}
      {% if not forloop.first %} <!-- Skip featured post -->
      <article class="bg-white rounded-2xl shadow hover:shadow-2xl transition-transform duration-300 hover:scale-[1.03] overflow-hidden flex flex-col">

        <!-- Card Image -->
        <div class="h-48 w-full overflow-hidden">
          {% if post.image %}
            <img src="{{ post.image.url }}" class="w-full h-full object-cover" alt="{{ post.title }}">
          {% else %}
            <img src="/static/images/blog_placeholder.jpg" class="w-full h-full object-cover" alt="Blog">
          {% endif %}
        </div>

        <div class="p-6 flex flex-col flex-grow">
          <p class="text-sm text-gray-500">{{ post.published_at|date:"M d, Y" }}</p>

          <h3 class="text-xl font-semibold mt-2">
            <a href="{{ post.get_absolute_url }}" class="hover:text-[#003049] transition">
              {{ post.title }}
            </a>
          </h3>

          <p class="mt-3 text-gray-700 flex-grow">
            {{ post.body|truncatechars:130 }}
          </p>

          <a href="{{ post.get_absolute_url }}"
             class="mt-4 inline-block text-[#d62828] font-semibold hover:underline">
            Read More →
          </a>
        </div>

      </article>
      {% endif %}
      {% empty %}
        <p>No blog posts yet.</p>
      {% endfor %}
    </div>

  </div>
</section>

{% endblock %}
